<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> 밑바닥부터 만드는 컴파일러 in Go란 책을 읽고 나서 | JooHyoung Cha </title> <meta name="author" content="JooHyoung Cha"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://blog.udon.party/blog/2022/compiler/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">JooHyoung</span> Cha </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">밑바닥부터 만드는 컴파일러 in Go란 책을 읽고 나서</h1> <p class="post-meta"> Created in August 17, 2022 by piorosen </p> <p class="post-tags"> <a href="/blog/2022"> <i class="fa-solid fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/llvm"> <i class="fa-solid fa-hashtag fa-sm"></i> llvm</a>   <a href="/blog/tag/ir"> <i class="fa-solid fa-hashtag fa-sm"></i> ir</a>   <a href="/blog/tag/byte"> <i class="fa-solid fa-hashtag fa-sm"></i> byte</a>   <a href="/blog/tag/go"> <i class="fa-solid fa-hashtag fa-sm"></i> go</a>   <a href="/blog/tag/compiler"> <i class="fa-solid fa-hashtag fa-sm"></i> compiler</a>   <a href="/blog/tag/low-level"> <i class="fa-solid fa-hashtag fa-sm"></i> low-level</a>   <a href="/blog/tag/virtual"> <i class="fa-solid fa-hashtag fa-sm"></i> virtual</a>   <a href="/blog/tag/machine"> <i class="fa-solid fa-hashtag fa-sm"></i> machine</a>   <a href="/blog/tag/dotnet"> <i class="fa-solid fa-hashtag fa-sm"></i> dotnet</a>   <a href="/blog/tag/harmony"> <i class="fa-solid fa-hashtag fa-sm"></i> harmony</a>   <a href="/blog/tag/asic"> <i class="fa-solid fa-hashtag fa-sm"></i> asic</a>   ·   <a href="/blog/category/blogging"> <i class="fa-solid fa-tag fa-sm"></i> Blogging</a>   <a href="/blog/category/review"> <i class="fa-solid fa-tag fa-sm"></i> Review</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="개요">개요</h1> <p>2022년 인턴을 진행하면서, 정말 낮은 저수준(Low-Level)의 개발이 무엇인지 알게 되었습니다. 특히 에트리에서 도서는 책을 마음껏 빌려서 읽을 수 있었습니다. 그 덕분에 Go 언어란 책을 찾아보니, <a href="https://book.interpark.com/product/BookDisplay.do?_method=detail&amp;sc.prdNo=352904104&amp;gclid=CjwKCAjwo_KXBhAaEiwA2RZ8hG6nTTyrJ-V76x5WL893WWJYCBqHKF1_6awwj5RjXVYPv3BWpmPtyxoCWqMQAvD_BwE" rel="external nofollow noopener" target="_blank">“밑바닥부터 만드는 컴파일러 in Go”</a>를 책을 빌려 읽은 뒤 나의 생각 변화와, 어떤것을 공부했는지 서술 합니다.</p> <h1 id="컴파일러가-무엇인가">컴파일러가 무엇인가?</h1> <p>책에서 소개하는 내용은 아래와 같습니다. 코드를 돌릴 가상 머신, VM이 있고, VM을 돌릴 OpCode, 소스코드와 OpCode와의 중간 단계인 바이트 코드가 있습니다. 컴파일러 안에는 다양한 기능이 있습니다. 특히 Lexer와, Parser를 통해 Abstract Syntax Tree(AST)를 생성하고, 최종적으로 바이트 코드를 생성합니다. 그리고 해당 바이트 코드는 OpCode로 치환이 됩니다. 그리고 코드 상으로 만든, VM에서 OpCode를 실행 합니다. 즉 컴파일러는 소스 코드란 것을 넣게 되면 실행할 수 있는 OpCode를 최종적으로 생성하는 것 입니다.</p> <h2 id="내가-생각하는-컴파일러">내가 생각하는 컴파일러</h2> <blockquote> <p>소스코드를 넣으면 실행파일이 쨔쟌 하고 나타남!<br></p> </blockquote> <h2 id="책을-읽고-생각한-컴파일러">책을 읽고 생각한 컴파일러</h2> <blockquote> <p>소스코드가 아닌 무언가 데이터를 넣으면 아무튼 실행 파일이 쨔쟌 하고 나타남!<br> 컴파일러는 장비의 Instruction(명령어)를 생성하는 프로그램 이기 때문에, 명령어를 생성하는 프로그램이라면 무엇이든지 컴파일러가 될 수 있습니다!<br> 그래서 명령어를 생성하는 프로그램이 명령어를 생성하는 프로그램이 바로 GCC 이라는 것을 알게 되었습니다.<br> LLVM은 IR을 생성하면 알아서, 자동적으로 옵션에 따라, 명령어를 생성 하기 때문에 IR을 생성하면 LLVM에 의한 최적화도 꾀할 수 있습니다.<br> (중요!) GCC를 통해 GCC를 만드는게 어떤 말인지 알게 되었습니다.<br></p> </blockquote> <h1 id="net-에서-접했던-내용">.Net 에서 접했던 내용</h1> <p>C# 에서 리플렉션을 이용하면서 특히 <a href="https://github.com/pardeike/Harmony" rel="external nofollow noopener" target="_blank">[Harmony]</a>란 라이브러리는 C#은 빌드 하게 되면 중간 언어인 IL 이란 언어로 빌드가 되고, IL 언어는 닷넷 프레임워크를 통해 실시간으로 번역 및 실행할 수 있는 바이너리로 실행이 되는 구조 입니다. 그렇기 때문에 닷넷 프레임워크(모노, 코어)상에서 코드가 “런타임” 중 번역이 되기 때문에, 런타임에 코드를 강제로 삽입하고, 코드를 돌릴 수 있지 않을까? 란 개념에 나온 라이브러리 입니다. <br></p> <p>리플렉션 기능은 C#에러 런타임에 타입을 체크 하기 위해, 존재하지만 본질은 그 내용이 아닌, 리플렉션의 핵심 기술인 ILGenerator가 핵심 입니다. ILGenerator는 런타임 중에 OpCode를 Emit하여 실행 합니다. 그렇기 때문에 ILGenerator를 이용하면, 런타임 중에 C#이 할 수 있는 모든 일을 할 수 있는것이 됩니다.<br></p> <p>Harmony는, ILGenerator를 통해 각각의 Mono, Core, Framework의 버전별로 관리하는 라이브러리 입니다. 즉, OpCode를 Emit하는 것을 이용하여 클래스를 생성 및, 함수를 삭제 할 수 있었습니다. 그래서 기존에 이러한 내용을 알고 있었기 때문에 이 책을 읽는데 문제가 없었습니다.</p> <h1 id="컴파일러와-asic">컴파일러와 ASIC</h1> <p>무언가 성능적으로 최적화를 하기 위해 무언가의 모듈을 개발 하는것도 최선이 될 수 있겠지만, 이러한 최적화 옵션을 거치는 것 자체가 하나의 CPU Instruction을 낭비하는 행위가 될 수 있습니다. 그래서 1 Cycle이라도 중요한 초소형 임베디드 시스템의 소프트웨어가 들어갈 땐, 모든 행동 동작이 정의가 된 실행파일을 뽑아낼 수 있다면 라이브러리를 통한 최적화 보다 조금 더 최적화 할 수 있을것 입니다. 만약 이러한 소프트웨어보다 더 최적화 하길 원한다면 <a href="https://en.wikipedia.org/wiki/Application-specific_integrated_circuit" rel="external nofollow noopener" target="_blank">[Application-Specific Integrated Circuit]</a>을 통하거나 <a href="https://en.wikipedia.org/wiki/Field-programmable_gate_array" rel="external nofollow noopener" target="_blank">[Field-programmable gate array]</a>를 통해 하드웨어적으로 처리를 할수 있습니다.</p> <blockquote> <p>대표적인 예로 TESLA의 완전 자율 주행 자동차는 ASIC으로 반도체 칩적으로 최적화가 되어 있습니다.</p> </blockquote> <h1 id="후기">후기</h1> <p>정말 간단하지만 간단하지 않고, 성능의 최적화를 할 수 있고, 반드시 성능이 좋아진다는것을 알지만, 선뜻 적용하기 어려운 분야입니다. 컴파일 타임 때 실행시간은 무제한이니, 컴파일 했을 때 성능이 라이브러리에 비해 10%가 증가 한다면, 컴파일러나 ASIC의 개발 비용과 비교하여 적용하면 최고의 선택지 인것 같습니다.</p> <blockquote> <p>즉 이러한 연구는 연구소에서 하고, 기술 이전 하는게 최고다…</p> </blockquote> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/Winograd-Algorithm/">위노그라드 알고리즘 정리</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/ssh-vpn-forward/">외부에서 내부망으로 접근하기 위한 3가지의 방법론</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/GIST-Developer/">GIST Developers' Night 2024에 연사로 참가하고 나서</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/jvm-book-readed/">JVM 밑바닥까지 파헤치기 책을 읽고</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/reading-High-Performance-Cpp/">고성능을 위한 언어 C++ 책을 읽고나서</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 JooHyoung Cha. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>