<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> 다른 사람이 짠 OAuth 코드를 프로젝트에 맞게 이식하기 | JooHyoung Cha </title> <meta name="author" content="JooHyoung Cha"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://blog.udon.party/blog/2024/oauth/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">JooHyoung</span> Cha </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">다른 사람이 짠 OAuth 코드를 프로젝트에 맞게 이식하기</h1> <p class="post-meta"> Created in January 23, 2024 by piorosen </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/security"> <i class="fa-solid fa-hashtag fa-sm"></i> security</a>   <a href="/blog/tag/oauth"> <i class="fa-solid fa-hashtag fa-sm"></i> oauth</a>   <a href="/blog/tag/jwt"> <i class="fa-solid fa-hashtag fa-sm"></i> jwt</a>   <a href="/blog/tag/opensource"> <i class="fa-solid fa-hashtag fa-sm"></i> opensource</a>   <a href="/blog/tag/supabase"> <i class="fa-solid fa-hashtag fa-sm"></i> supabase</a>   <a href="/blog/tag/gotrue"> <i class="fa-solid fa-hashtag fa-sm"></i> gotrue</a>   <a href="/blog/tag/customized"> <i class="fa-solid fa-hashtag fa-sm"></i> customized</a>   <a href="/blog/tag/apple"> <i class="fa-solid fa-hashtag fa-sm"></i> apple</a>   <a href="/blog/tag/google"> <i class="fa-solid fa-hashtag fa-sm"></i> google</a>   <a href="/blog/tag/kakao"> <i class="fa-solid fa-hashtag fa-sm"></i> kakao</a>   <a href="/blog/tag/naver"> <i class="fa-solid fa-hashtag fa-sm"></i> naver</a>   ·   <a href="/blog/category/blogging"> <i class="fa-solid fa-tag fa-sm"></i> Blogging</a>   <a href="/blog/category/develop"> <i class="fa-solid fa-tag fa-sm"></i> Develop</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="개요">개요</h1> <p>글의 접근성을 높이기 위해 엄청나게 쉽고, 간단하게 작성하였음을 먼저 밝힙니다. 사실, 다른 사람이 짠 코드를 (아무런 문서가 없는) 자신에게 맞게끔 수정하고, 적용하는것은 많이 어렵고 까다롭습니다. 이 점을 먼저 확인하고, 다음의 글을 읽어나가면 도움이 될 것 같습니다.</p> <p>프로그램을 <code class="language-plaintext highlighter-rouge">개발</code>하기 위해 가장 먼저 개발이 되는 것은 가히 <code class="language-plaintext highlighter-rouge">로그인</code>이라 말할 수 있습니다. 로그인과 회원가입은 매 프로젝트 마다 개발이 되어져야하는, 매우 번거롭고 귀찮으며, 최근 트렌드에 맞추는 것은 상당한 귀찮음이 따라오게 됩니다. 이에, 보통은 다른 사람들이 사전에 개발한 프로그램이나 오픈소스로 구현된 것을 들고와서 개발합니다. 하지만, 오픈소스로 구현된 것을 활용하게 된다면 라이센스로 인한 코드 공개 의무가 발생하거나, 유료 정책으로 인해 더 번거로워지거나 심각한 의존성이 발생할 수 있습니다. 그래서 직접 구현하거나, 직접 개발한 내용을 다시 활용하기도 합니다.</p> <p>본 글에서는 필자가 OAuth2.0 을 통한 로그인 프로그램 개발 할 때 어떻게 구현하였는지 설명하는 것이 핵심 내용입니다. 필자의 경우에는 OAuth2.0을 통한 로그인이 분명히 어딘가에 구현이 되어 있을거라 생각하였고, 오픈소스 프로젝트를 활용하여 로그인 서비스를 제공하였지만, 라이센스 문제와 기능 특정(Naver OAuth)가 누락되어 있어 직접 구현하게 되었습니다.</p> <h1 id="개발-흐름">개발 흐름</h1> <p>먼저, OAuth2.0 로그인 서비스를 위해 사용된 오픈소스는 <a href="https://github.com/supabase/supabase" rel="external nofollow noopener" target="_blank">Supabase(Github)</a> 입니다. 다만, <code class="language-plaintext highlighter-rouge">Supabase</code>가 <code class="language-plaintext highlighter-rouge">Kubernetes</code>가 아닌 <code class="language-plaintext highlighter-rouge">docker-compose</code> 형태로 제공이 되고있다 보니, <code class="language-plaintext highlighter-rouge">kubernetes</code>를 위한 <code class="language-plaintext highlighter-rouge">yaml</code> 파일을 작성하여 테스트를 진행하게 되었습니다. 이때, <code class="language-plaintext highlighter-rouge">OAuth2.0</code>을 제공되고 있던 목록들이 많았지만, 원하던 <code class="language-plaintext highlighter-rouge">Naver</code>가 없었기도 했지만, <code class="language-plaintext highlighter-rouge">Self Hosting</code>에서는 <code class="language-plaintext highlighter-rouge">OAuth</code>를 통한 <code class="language-plaintext highlighter-rouge">Authentication</code>이 지원하지 않았다는 점입니다.</p> <p><img src="/assets/img/post/2024-01-23-01.png" alt=""></p> <p>그래서 직접 구현하는것이 더 옳바르다고 생각하게 되었고, <code class="language-plaintext highlighter-rouge">Supabase</code>에서 제공하는 기능들이나, <code class="language-plaintext highlighter-rouge">OAuth2.0</code>를 구현한 오픈 소스를 가져와서 커스텀하는 것이 더 빠를것이라 판단하였습니다.</p> <p>실제로, <code class="language-plaintext highlighter-rouge">Supabase</code>에서 사용하는 <code class="language-plaintext highlighter-rouge">OAuth</code>관련 라이브러리/프로그램은 MIT 라이센스로, <a href="https://github.com/supabase/gotrue" rel="external nofollow noopener" target="_blank">gotrue</a> 오픈소스 였다는 점이였습니다. <code class="language-plaintext highlighter-rouge">gotrue</code>는 <code class="language-plaintext highlighter-rouge">Go</code>언어로 작성된 <code class="language-plaintext highlighter-rouge">Supabase</code>를 위한 <code class="language-plaintext highlighter-rouge">OAuth</code> 프로그램이였기에, 간단하게 코드를 수정한다면? <code class="language-plaintext highlighter-rouge">Supabase</code>에서 만든 <code class="language-plaintext highlighter-rouge">OAuth</code> 기능을 온전히 사용할 수 있지 않을까? 라는 생각하게 되었습니다.</p> <p>당연하게도, 처음에는 <code class="language-plaintext highlighter-rouge">gotrue</code>를 바로 사용하는것이 가능했다면 쉬웠겠지만, <code class="language-plaintext highlighter-rouge">gotrue</code>는 <code class="language-plaintext highlighter-rouge">supabase</code>를 타겟으로 만들어졌다 보니, 불필요한 코드와 함께 강한 커플링이 되어져 있었기에, <code class="language-plaintext highlighter-rouge">gotrue</code>를 온전히 사용하기 어렵다고 판단하였습니다. <code class="language-plaintext highlighter-rouge">gotrue</code>의 코드를 분석하여 새롭게 나의 솔루션에 맞는, 커스텀화가 되어져 있는 프로그램을 개발하게 되었습니다.</p> <h1 id="실제-개발">실제 개발</h1> <p>안타깝게도, <code class="language-plaintext highlighter-rouge">gotrue</code>에는 문서화가 전혀 되어있지 않았습니다. 필자의 특기인 다른사람의 코드를 분석 및 수정하기가 많은 도움이 되었습니다. 먼저, <code class="language-plaintext highlighter-rouge">Oauth</code>가 구현되어져있는 <code class="language-plaintext highlighter-rouge">facebook</code>, <code class="language-plaintext highlighter-rouge">gitlab</code>, <code class="language-plaintext highlighter-rouge">kakako</code>는 프로젝트 어딘가에 파일명이나, 함수 명으로 존재할 것이기 때문에 검색하여 찾는 것을 우선시 하였습니다. <a href="https://github.com/supabase/gotrue/tree/master/internal/api/provider" rel="external nofollow noopener" target="_blank">code</a> 그래서, 아하! 해당 코드만 복사해서 오류가 나지 않게 수정한다면 완벽하겠군! 이라 판단하여, 해당 폴더에 있는 모든 내용을 복사한 다음, 빌드 오류가 나지 않도록 적절히 수정을 해주었습니다.</p> <p>결과적으로는 <code class="language-plaintext highlighter-rouge">gotrue</code>에서 구현되어져 있던 모든 <code class="language-plaintext highlighter-rouge">OAuth</code> 코드를 가져와서 실행할 수 있었고, <code class="language-plaintext highlighter-rouge">Naver</code>의 <code class="language-plaintext highlighter-rouge">OAuth</code>도 적절하게 추가할 수가 있었습니다.</p> <p>다행이도, 대부분 프로그램들이 CLI 환경에서 동작하는 프로그램의 라이센스는 자유롭게 하되, GUI와 관련된 프로그램은 유료 라이센스 정책으로 하는 덕분에 충분히 가능했었습니다.</p> <p><img src="/assets/img/post/2024-01-23-02.png" alt=""></p> <h1 id="개발-시간">개발 시간</h1> <p>대부분의 OAuth를 들고와서 <code class="language-plaintext highlighter-rouge">Client Key</code>와 <code class="language-plaintext highlighter-rouge">Secret Key</code>, <code class="language-plaintext highlighter-rouge">Redirect URI</code>만 기입한다면 모두 동작하도록 만들 수 있었습니다. 또한, 이전에 개발이 되어져 있떤 <code class="language-plaintext highlighter-rouge">gotrue</code>를 들고와서 필자의 프로젝트에 맞게 개발까지는 만 4시간 걸렸을 때, 1개의 Oauth 로그인이 되는저 PoC를 진행하였고, 만 6시간 정도 지났을 때, 모두 동작하는 것을 확인하였습니다. 그 정도로 엄청나게 짧은 시간 내에 개발 할수 있을 정도로, 개발 시간을 단축이 가능했습니다.</p> <h1 id="첨언">첨언</h1> <p>직접 모든것을 개발하거나, 이미 만들어져 있는 오픈소스를 들고와서 사용하는 것이 아니라, 원하는 기능만 들고와서 사용하는 것은 어떨까요?</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/Winograd-Algorithm/">위노그라드 알고리즘 정리</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/ssh-vpn-forward/">외부에서 내부망으로 접근하기 위한 3가지의 방법론</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/GIST-Developer/">GIST Developers' Night 2024에 연사로 참가하고 나서</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/jvm-book-readed/">JVM 밑바닥까지 파헤치기 책을 읽고</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/reading-High-Performance-Cpp/">고성능을 위한 언어 C++ 책을 읽고나서</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 JooHyoung Cha. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>