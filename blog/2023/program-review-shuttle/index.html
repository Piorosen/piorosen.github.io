<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> SSH 기반 VPN 클라이언트 sshutle(SSH Over VPN) | JooHyoung Cha </title> <meta name="author" content="JooHyoung Cha"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://blog.udon.party/blog/2023/program-review-shuttle/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">JooHyoung</span> Cha </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">SSH 기반 VPN 클라이언트 sshutle(SSH Over VPN)</h1> <p class="post-meta"> Created in September 17, 2023 by piorosen </p> <p class="post-tags"> <a href="/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/ssh"> <i class="fa-solid fa-hashtag fa-sm"></i> ssh</a>   <a href="/blog/tag/vpn"> <i class="fa-solid fa-hashtag fa-sm"></i> vpn</a>   <a href="/blog/tag/ssh-over-vpn"> <i class="fa-solid fa-hashtag fa-sm"></i> ssh-over-vpn</a>   <a href="/blog/tag/ssh-client"> <i class="fa-solid fa-hashtag fa-sm"></i> ssh-client</a>   <a href="/blog/tag/dns"> <i class="fa-solid fa-hashtag fa-sm"></i> dns</a>   <a href="/blog/tag/internal-network"> <i class="fa-solid fa-hashtag fa-sm"></i> internal-network</a>   ·   <a href="/blog/category/program"> <i class="fa-solid fa-tag fa-sm"></i> Program</a>   <a href="/blog/category/review"> <i class="fa-solid fa-tag fa-sm"></i> Review</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="개요">개요</h1> <p>항상, 무언가에 막힌다면 새로운 아이디어를 통해 헤쳐나가는 것이 중요하다 생각이 들곤 한다. 특히, 동의대학교의 정보 보안 도구는 비싼것을 쓰는 것인지, 보안 규칙이 하드하게 잡혀있는진 잘 모르겠지만, 외부에서 내부간 통신을 할 때 대부분 교내 방화벽에 의해 막혀있다. (e.g. UDP 통신, Well-Knwon 포트, 1만번 이상의 포트) 그래서 DNS를 구축하거나, VPN 서버를 따로 구축하는 것은 불가능하였다. (DNS는 서버가 생존하고 있는지 UDP로 헬스 체크를 수행하므로, VPN은 최신 프로토콜의 경우 대부분 UDP 기반으로 통신을 수행한다. TCP로 통신하는 것이 하나 있긴 하나, 맥에선 미지원하고, 보안상 문제로 사용이 금시되는 분위기이다.)</p> <p>그래서 교내에 VPN을 설치하기 위해서 다양한 고민을 하였고, 이를 위해서 어떻게 하면 많은 학생들과 회의하면서 최선책을 생각하게 되었다. 그 결과 SSH 기반으로 채택하게 되었다. 이유로는 SSH에는 기본적으로 포트포워딩이란 개념이 존재하는데, 이는 클라이언트의 포트와 내부망의 특정 컴퓨터의 포트와 맵핑 시키기 위해 쓰이는 기술이다. 이를 활용하여 사용되는 곳은 FTP, VNC가 대표적으로 사용되고 있다. (ps. SFTP가 FTP + SSH 기반이고, FTPS가 FTP + OpenSSL로 암묵적으로 불려지는것 같다.)</p> <p>SSH 기반으로 UDP 포트를 맵핑시켜 VPN을 실행시키는 마법적인 프로그램이 있지 않을까? 라는 생각을 하였고 이 과정에서 SSH Over VPN 프로그램 중 하나인 sshutle이란 프로그램을 만나게 되었다.</p> <h1 id="장단점">장/단점</h1> <p><a href="https://github.com/sshuttle/sshuttle" rel="external nofollow noopener" target="_blank">sshutle</a> 이란 프로그램은 기본적으로 SSH 클라이언트이므로, SSH 서버가 설치가 되어있는 환경이라면 어디서든지 사용할 수 있는 장점이 있다.</p> <p>단점으로는 SSH 서버의 비밀번호가 유출이 되었을 때, 내부망 전체가 공개가 될 수 있는 취약점이 된다는 것과 어찌보면 보안 취약점을 기반으로한 기술이지 아니할까 싶은 생각이 있다. 이는 VPN 또한 계정이 유출되면 내부망이 공개가 된다는 것 또한 비슷하다.</p> <h1 id="필자의-적용-사례">필자의 적용 사례</h1> <p>필자의 경우 아래의 명령어를 기반으로 내부망에 접근하도록 하였다. <code class="language-plaintext highlighter-rouge">--dns</code>를 통해 내부 DNS서버를 활용하고, <code class="language-plaintext highlighter-rouge">-vr</code> 에서 사용자 계정을 입력을 합니다. 마지막으로 <code class="language-plaintext highlighter-rouge">0/0</code>은 사용자가 서버에 접속 할 때, 어느 범위까지 포트포워딩, VPN의 역할을 수행하도록 할 것인지 지정 합니다. <code class="language-plaintext highlighter-rouge">0/0</code>은 전체 서버의 모두 다가 되고, 만약 서버가 <code class="language-plaintext highlighter-rouge">192.168.0.*</code> 이라면 <code class="language-plaintext highlighter-rouge">192.168.0.0/24</code>으로 지정 하시면 됩니다. 이러한 표기법은 CIDR 표기법이라 하고, IP 주소와 서브넷 마스크를 합친 표현 기법입니다.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sshuttle --dns -vr {UserID}@{ServerIP}:{SSHPort} 0/0
</code></pre></div></div> <p>필자는 Kubernetes 서버에 SSH 서버를 설치하고, 쿠버네티스 서버의 서버에 접속하는 용도로 활용하였습니다. 이를 통해 쿠버네티스의 서비스 들인, <code class="language-plaintext highlighter-rouge">deployment.namespace.svc.cluster.local</code> 에 접속이 가능해지므로 엄청 유용해 지기 떄문입니다.</p> <p>그렇게 되면 <code class="language-plaintext highlighter-rouge">쿠버네티스</code>의 <code class="language-plaintext highlighter-rouge">포트포워딩</code>없이 포트포워딩과 동일한 효과를 얻을 수 있으므, 편리하고, 따른 설정이 없어도 되는 장점이 있습니다.</p> <p>그 외에 외부에서 급히, 공유기를 사용해야할 때, 위의 <code class="language-plaintext highlighter-rouge">sshutle</code>을 이용하여 공유기 화면에 접근을 하는 등 유용하게 활용이 가능합니다.</p> <h1 id="결론">결론</h1> <p>백도어가 필요하다면 역시 SSH만 설치하더라도 충분하고, 최고입니다.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/Winograd-Algorithm/">위노그라드 알고리즘 정리</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/ssh-vpn-forward/">외부에서 내부망으로 접근하기 위한 3가지의 방법론</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/GIST-Developer/">GIST Developers' Night 2024에 연사로 참가하고 나서</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/jvm-book-readed/">JVM 밑바닥까지 파헤치기 책을 읽고</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/reading-High-Performance-Cpp/">고성능을 위한 언어 C++ 책을 읽고나서</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 JooHyoung Cha. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>